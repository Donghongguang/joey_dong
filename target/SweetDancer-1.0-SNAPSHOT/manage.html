<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>首页</title>
    <link rel="stylesheet" type="text/css" href="css/team1/main.css">
    <link rel="stylesheet" type="text/css" href="css/team1/iconfont.css">
    <link rel="stylesheet" type="text/css" href="css/team1/bootstrap5152.css">
    <link rel="stylesheet" type="text/css" href="css/team1/bootstrap-table.css">
    <link href="fileinput-4.5.1/css/fileinput.min.css" media="all" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="js/Team1/jquery-3.3.1.min.js"></script>
    <script src="js/Team1/sweetalert.min.js"></script>
    <script type="text/javascript" src="js/Team1/bootstrap.min.js"></script>
    <script src="js/Team1/bootstrap-table.js"></script>
    <script type="text/javascript" src="fileinput-4.5.1/js/fileinput.min.js"></script>
    <script type="text/javascript" src="fileinput-4.5.1/js/locales/LANG.js"></script>
    <script type="text/javascript" src="fileinput-4.5.1/js/plugins/piexif.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="fileinput-4.5.1/js/plugins/sortable.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="fileinput-4.5.1/js/plugins/purify.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="fileinput-4.5.1/theme/js/theme.min.js"></script>
    <script type="text/javascript" src="js/login/manager.js"></script>
</head>
<body>
<div class="container-fluid">
    <!-- Start of Header -->
    <div class="header">
        <div class="headiv">
            <span id="wel">欢迎来到糖果街舞教育平台</span>
        </div>
    </div>
    <!-- End of Header -->
    <div class="row-fluid leader">
        <div class="span12">
            <div class="navbar">
                <div class="navbar-inner" id="daohang">
                    <div class="container-fluid top_logo">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".navbar-responsive-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span><span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="#">
                            <img src="images/logo.png" class="logo">
                        </a>
                        <div class="nav-collapse collapse navbar-responsive-collapse">

                            <ul class="nav pull-right">
                                <li>
                                    <a href="https://www.capgemini.com/cn-zh/"></a>
                                </li>
                                <li class="divider-vertical">
                                </li>
                                <li class="dropdown">
                                    <a class="dropdown-toggle xialakuang2" href="#" data-toggle="dropdown">我的信息<strong
                                            class="caret"></strong></a>
                                    <ul class="dropdown-menu something2">


                                        <li>
                                            <a href="#myModal1" id="myUserInfo" onclick="showUserInfo()">基本信息</a>
                                        </li>
                                        <li class="divider">
                                        </li>
                                        <li>
                                            <a href="login.html">注销</a>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <div class="row-fluid con">
            <div class="contentLeft">
                <!-- <nav type="0" class="inlineblock allNav"> -->
                <ul class="list-unstyled">

                    <li id="userinfoPage">
                        <i class="iconfont icon-zhuanzheng "></i>
                        <span><a href="#main">用户信息</a></span>
                        <i class="iconfont icon-jiantou"></i>
                    </li>
                    <li id="admininfoPage">
                        <i class="iconfont icon-drxx15 cute4"></i>
                        <span><a href="#experience">员工信息</a></span>
                        <i class="iconfont icon-jiantou"></i>
                    </li>
                    <li>
                        <i class="iconfont icon-jianliyulan_jiaoyujingli"></i>
                        <span><a href="#my" >视频总部</a></span>
                        <i class="iconfont icon-jiantou"></i>

                    </li>
                    <li>
                        <i class="iconfont icon-changjingguanli"></i>
                        <span><a href="#talent">我的视频</a></span>
                        <i class="iconfont icon-jiantou"></i>
                    </li>
                    <li>
                        <i class="iconfont icon-tiaoshi"></i>
                        <span><a href="#talent">上传视频</a></span>
                        <i class="iconfont icon-jiantou"></i>
                    </li>
                    <li id="needCheckAudio">
                        <i class="iconfont icon-tiaoshi"></i>
                        <span><a href="#need">待审核的视频</a></span>
                        <i class="iconfont icon-jiantou"></i>
                    </li>
                </ul>
                <!-- </nav> -->

            </div>

            <div class="contentRight">
                <!------------------------隐藏按钮 ------------------------>
                <div id="go1" title="隐藏"><i class="iconfont icon-jiantou_yemian_xiangzuo"></i></div>
                <!------------------------欢迎界面------------------------>
                <div id="firstpage">
                    <img src="images/wel.png">
                    <!-- <div class="welcome">

                        <img src="images/logo.png">
                        <span>Welcome to Capgemini's management system!</span><br>
                        <img src="images/Capgemini_new.gif">
                    </div> -->
                </div>
                <!------------------------用户信息------------------------>
                <div id="Incumbent">
                    <div class="top">
                        <span>用户信息管理</span>

                    </div>


                    <div class="btns">
                        <button type="button" class="adds" id="showAddUserInfoModal">新增</button>
                    </div>

                    <div class="mess">
                        <table id="online" border="1" style="border-color: #e2e2e2"></table>
                    </div>
                </div>
                <!--待审核的视频模态框-->
                <div id="needDiv">
                    <div class="top">
                        <span>待审核的视频</span>

                    </div>
                    <div id="needCheckLesson"></div>


                </div>
                <!------------------------员工信息------------------------>
                <div id="Resignation">
                    <div class="top">
                        <span>员工信息管理</span>
                    </div>
                    <div class="btns">
                        <button type="button" class="adds" id="showadminUserModal">新增</button>
                    </div>
                    <div class="mess">
                        <table id="offline" border="1" style="border-color: #e2e2e2"></table>
                    </div>

                </div>

                <!--我的视频-->
                <div id="users">
                    <div class="top">
                        <span>我的视频</span>
                    </div>
                        <div id="myAudio">

                        </div>


                </div>
                <!--视频信息管理总部-->
                <div id="resumes">
                    <div class="top">
                        <span>视频信息管理</span>

                    </div>
                    <div id="lesson" >


                    </div>
                </div>


                <!--上传视频-->
                <div id="applys" >
                    <div id="vidio" class="kv-hidden">
                    <div class="top">
                        <span>上传视频</span>
                    </div>
                    &emsp;请选择要导入的视频:<br/>
                    <div id="importZip">
                        <input id="input-id" multiple type="file" name="file" class="file-uploading"
                               data-preview-file-type="text">

                        <br>
                    </div>
                    </div>
                    <div class="modal-content" id="selectType">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h4 class="modal-title">请选择视频类型</h4>
                        </div>
                        <div class="form-group">
                            <label for="audioType"></label>
                            <select id="audioType" class="add_infoSelect selectpicker show-tick form-control"
                                    data-live-search="true"></select>
                        </div>
                        <div class="form-group">
                            <button type="button" class="btn btn-primary tonew" data-dismiss="modal" id="sureUpload"
                                    onclick="getAudioType()">确定
                            </button>
                        </div>
                    </div>

                </div>
            </div>





        </div>
    </div>
</div>
<!------------------------添加用户信息模态框 ------------------------>
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="myModalLabel">添加用户信息</h4>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="username" class="control-label">用户名</label>
                    <input type="text" class="form-control" id="username">
                </div>
                <div class="form-group">
                    <label for="password" class="control-label infoTitle">密码</label>
                    <input type="password" class="form-control" id="password">
                </div>
                <div class="form-group">
                    <label for="confirmpassword" class="control-label infoTitle">确认密码</label>
                    <input type="password" class="form-control" id="confirmpassword">
                </div>
                <div class="form-group">
                    <label for="realname" class="control-label">真实姓名</label>
                    <input type="text" class="form-control" id="realname">
                </div>
                <div class="form-group">
                    <label for="age" class="control-label">年龄</label>
                    <input type="number" class="form-control" id="age">
                </div>
                <div class="form-group">
                    <input type="radio" class="radio" name="usersex" value="男"/>&emsp;男
                    <input type="radio" class="radio" name="usersex" value="女"/>&emsp;女
                </div>
                <div class="form-group">
                    <label for="telephone" class="control-label">手机号码</label>
                    <input type="tel" id="telephone" class="form-control"/>
                </div>
                <div class="form-group">
                    <label for="address" class="control-label">家庭住址</label>
                    <input type="text" id="address" class="form-control"/>
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary tonew" id="addUserInfoBtn">添加</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>
<!--------------------------------添加管理员信息模态框---------------------------------------------->
<div class="modal fade" id="adminModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="adminLabel">添加管理员基本信息</h4>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="adminusername" class="control-label">用户名</label>
                    <input type="text" class="form-control" id="adminusername">
                </div>
                <div class="form-group">
                    <label for="adminpassword" class="control-label infoTitle">密码</label>
                    <input type="password" class="form-control" id="adminpassword">
                </div>
                <div class="form-group">
                    <label for="adminconfirmpassword" class="control-label infoTitle">确认密码</label>
                    <input type="password" class="form-control" id="adminconfirmpassword">
                </div>
                <div class="form-group">
                    <label for="adminrealname" class="control-label">真实姓名</label>
                    <input type="text" class="form-control" id="adminrealname">
                </div>
                <div class="form-group">
                    <label for="adminage" class="control-label">年龄</label>
                    <input type="number" class="form-control" id="adminage">
                </div>
                <div class="form-group">
                    <input type="radio" class="radio" name="adminsex" value="男"/>&emsp;男
                    <input type="radio" class="radio" name="adminsex" value="女"/>&emsp;女
                </div>
                <div class="form-group">
                    <label for="admintelephone" class="control-label">手机号码</label>
                    <input type="tel" id="admintelephone" class="form-control"/>
                </div>
                <div class="form-group">
                    <label for="adminaddress" class="control-label">家庭住址</label>
                    <input type="text" id="adminaddress" class="form-control"/>
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary tonew" id="addAdminInfoBtn">添加</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>
<!------------------------显示个人的基本信息 ------------------------>
<div class="modal fade" id="myModal1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">编辑用户基本信息</h4>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="editusername" class="control-label">用户名</label>
                    <input type="text" class="form-control" id="editusername">
                </div>
                <div class="form-group">
                    <label for="editpassword" class="control-label infoTitle">密码</label>
                    <input type="password" class="form-control" id="editpassword">
                </div>
                <div class="form-group">
                    <label for="editconfirmpassword" class="control-label infoTitle">确认密码</label>
                    <input type="password" class="form-control" id="editconfirmpassword">
                </div>
                <div class="form-group">
                    <label for="editrealname" class="control-label">真实姓名</label>
                    <input type="text" class="form-control" id="editrealname">
                </div>
                <div class="form-group" id="money">
                    <label for="editAccountMoney" class="control-label">账户余额</label>
                    <input type="text" class="form-control" id="editAccountMoney" readonly="readonly">
                </div>
                <div class="form-group" id="score">
                    <label for="accountpoints" class="control-label">账户积分</label>
                    <input type="text" class="form-control" id="accountpoints" readonly="readonly">
                </div>
                <div class="form-group">
                    <label for="editage" class="control-label">年龄</label>
                    <input type="number" class="form-control" id="editage">
                </div>
                <div class="form-group">
                    <input type="radio" class="radio" name="editusersex" value="男"/>&emsp;男
                    <input type="radio" class="radio" name="editusersex" value="女"/>&emsp;女
                </div>
                <div class="form-group">
                    <label for="edittelephone" class="control-label">手机号码</label>
                    <input type="tel" id="edittelephone" class="form-control"/>
                </div>
                <div class="form-group">
                    <label for="editaddress" class="control-label">家庭住址</label>
                    <input type="text" id="editaddress" class="form-control"/>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                    <button type="button" class="btn btn-primary tonew" id="editUserInfoBtn" onclick="ModifyUserInfo()">
                        更改
                    </button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal -->
    </div>
</div>
<!--------------------------充值账户模态框-------------------------->
<div id="rechargemodal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">充值账户余额</h4>
            </div>
            <div class="form-group">
                <label for="intrinsicMoney">账户余额</label>
                <input type="number" id="intrinsicMoney" userid="" class="form-control" readonly="true">
            </div>
            <div class="form-group">
                <label for="rechargeText">充值金额</label>
                <input type="number" id="rechargeText" class="form-control">
            </div>
            <div class="form-group">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary tonew" data-dismiss="modal" id="rechargeBtn"
                        onclick="addMoney()">确定
                </button>
            </div>
        </div>
    </div>
</div>


<script type="text/css">
    thead {
        color: red;
    }

</script>
</body>
<style>
    video{
        object-fit: fill;
        width:400px;
        height: 200px;
    }
</style>

<script type="text/javascript">
    $(function () {
        $(".xialakuang1").hover(function () {
            $(".something1").toggle();
        })
        $(".something1").hover(function () {
            $(".something1").toggle();
        })
        $(".xialakuang2").hover(function () {
            $(".something2").toggle();
        })
        $(".something2").hover(function () {
            $(".something2").toggle();
        })
        $(".contentLeft").height($(window).height() - 125);//将div高度设置为窗口高度
        $(".contentRight").height($(window).height() - 125);//将div高度设置为窗口高度
        // $(".contentLeft li:first").trigger('click');

    })

</script>
<script type="text/javascript">
    $(document).ready(function () {

        $.ajax({
            "type": 'get',
            "url": "returnRoleId",
            "success": function (d) {
                if ("1" == d) {
                    $("#userinfoPage").hide();
                    $("#admininfoPage").hide();
                    $("#needCheckAudio").hide();
                }else{
                    $("#userinfoPage").show();
                    $("#admininfoPage").show();
                    $("#needCheckAudio").show();
                }
            }
        });
        getAllAudioType();

    })

    //显示视频
    function showAudio() {
        var allVedioID = document.getElementById("lesson");


        $.ajax({
            "url": "getAllvideo",
            "type": "get",
            "datatype": "json",
            "contentType": "application/json; charset=utf-8",
            "async": false,
            "success": function (data) {

                console.log(data);
                var str1 = "<div class='container'></div>";//用来保住每个视频

                console.log(data.length);


                for (var i = 0; i < data.length; i++) {
                    $("#lesson").append(str1);
                    var Ocontainer = allVedioID.getElementsByClassName('container');
                       str2 = "<div class='col-md-3'><h3 class='label'>"+data[i]['lessonname']+"</h3>"+"<div class='myhide'><button  class='btn btn-primary tonew ' value='"+data[i]['lessonid']+"' onclick='addToMyAudio(this)' >购买</button></div>"+"<video  controls='controls'>" + "<source src='" + data[i]['lessonurl'] + "'/>" +
                           "</video></div>"
                       $(Ocontainer[i]).append(str2);
                }

            }
        })



    }
    //显示待审核的视频
    function showNeedCheckAudio() {
        var allVedioID = document.getElementById("needCheckLesson");


        $.ajax({
            "url": "needCheck",
            "type": "get",
            "datatype": "json",
            "contentType": "application/json; charset=utf-8",
            "async": false,
            "success": function (data) {
                console.log(data);
                var str1 = "<div class='container'></div>";//用来保住每个视频

                console.log(data.length);


                for (var i = 0; i < data.length; i++) {
                    $("#needCheckLesson").append(str1);
                    var Ocontainer = allVedioID.getElementsByClassName('container');
                    str2 = "<div class='col-md-3'><h3 class='label'>"+data[i]['lessonname']+"</h3>"+"<div><button  class='btn btn-primary tonew ' value='"+data[i]['lessonid']+"' onclick='agree(this)' >通过</button>"+
                        "<button class='btn btn-primary tonew' value='"+data[i]['lessonid']+"' onclick='disAgree(this)'>驳回</button></div>"+
                        "<video  controls='controls'>" + "<source src='" + data[i]['lessonurl'] + "'/>" +
                        "</video></div>"
                    $(Ocontainer[i]).append(str2);
                }

            }
        })
    }
    //审核通过
    function agree(a) {
        var lessonId=a['value'];
        $.ajax({
            "type":'get',
            "url":"agree",
            "data":{
                "lessonId":lessonId
            },
            "success":function (d) {
                if(d>0){
                    swal("审核成功");
                  $("#needCheckLesson").empty();
                  showNeedCheckAudio();
                }else{
                    swal("审核失败");
                }

            }
        })

    }
    //审核不通过
    function disAgree(b) {
        var lessonId=b['value'];
        $.ajax({
            "type":'get',
            "url":"disagree",
            "data":{
                "lessonId":lessonId
            },
            "success":function (d) {
                if(d>0){
                    swal("操作成功");
                }else{
                    swal("操作失败");
                }
            }
        })

    }
    //显示我的视频
    function showMyAudio() {
        var allVedioID = document.getElementById("myAudio");


        $.ajax({
            "url": "getMyAudio",
            "type": "get",
            "datatype": "json",
            "contentType": "application/json; charset=utf-8",
            "async": false,
            "success": function (data) {

                console.log(data);
                var str1 = "<div class='container'></div>";//用来保住每个视频

                console.log(data.length);


                for (var i = 0; i < data.length; i++) {
                    $("#myAudio").append(str1);
                    var Ocontainer = allVedioID.getElementsByClassName('container');
                    str2 = "<div class='col-md-3'><h3 class='label'>"+data[i]['lessonname']+"</h3>"+"<video  controls='controls'>" + "<source src='" + data[i]['lessonurl'] + "'/>" +
                        "</video></div>"
                    $(Ocontainer[i]).append(str2);
                }

            }
        })



    }
    //添加到我的视频
    function addToMyAudio(b){

      var lessonid=b['value'];
      $.ajax({
          "type":'get',
          "url":"buyAudio",
          "data":{
              "lessonId":lessonid
          },
          "success":function (d) {
              if(d>0){
                  swal("购买成功");
              }else{
                  swal("购买失败");
              }

          }
      })

    }
    //视频类型选择下拉框
    function getAllAudioType() {
        var optionheml = '';
        $.ajax({
            "type": 'get',
            "url": "getAllType",
            "success": function (data) {
                for (var i = 0; i < data.length; i++) {
                    optionheml += '<option   typeid="' + data[i].typeid + '" value="' + data[i].typename + '" data_orgcoding="' + data[i].orcoding + '">'
                        + data[i].typename + '</option>'
                }
                $("#audioType").append(optionheml);
                console.log(data);
            }
        })

        console.log(optionheml);

    }

    $(".contentLeft ul").on({
        click: function () {

            if ($(this).children('span').text() == "用户信息") {
                $(".contentRight #firstpage").hide();
                $(".contentRight #Incumbent").show();
                $(".contentRight #Resignation").hide();
                $(".contentRight #resume").hide();
                $(".contentRight #resumes").hide();
                $(".contentRight #applys").hide();
                $(".contentRight #users").hide();
                $(".contentRight #needDiv").hide();
            } else if ($(this).children('span').text() == "员工信息") {
                $(".contentRight #firstpage").hide();
                $(".contentRight #Incumbent").hide();
                $(".contentRight #Resignation").show();
                $(".contentRight #resume").hide();
                $(".contentRight #resumes").hide();
                $(".contentRight #applys").hide();
                $(".contentRight #users").hide();
                $(".contentRight #needDiv").hide();
            } else if ($(this).children('span').text() == "视频总部") {
                $(".contentRight #firstpage").hide();
                $(".contentRight #Incumbent").hide();
                $(".contentRight #Resignation").hide();
                $(".contentRight #resumes").show();
                $(".contentRight #resume").hide();
                $(".contentRight #applys").hide();
                $(".contentRight #users").hide();
                $(".contentRight #needDiv").hide();
                $("#lesson").empty();
                showAudio();
                $.ajax({
                    "type": 'get',
                    "url": "returnRoleId",
                    "success": function (d) {
                        if ("1" == d) {
                          $(".myhide").show();

                        }else{
                           $(".myhide").hide();
                        }
                    }
                });


            } else if ($(this).children('span').text() == "我的视频") {
                $(".contentRight #firstpage").hide();
                $(".contentRight #Incumbent").hide();
                $(".contentRight #Resignation").hide();
                $(".contentRight #resume").hide();
                $(".contentRight #resumes").hide();
                $(".contentRight #applys").hide();
                $(".contentRight #users").show();
                $(".contentRight #needDiv").hide();
                $("#myAudio").empty();
                showMyAudio();


            }

            else if($(this).children('span').text() == "待审核的视频"){
                $(".contentRight #firstpage").hide();
                $(".contentRight #Incumbent").hide();
                $(".contentRight #Resignation").hide();
                $(".contentRight #resume").hide();
                $(".contentRight #resumes").hide();
                $(".contentRight #applys").hide();
                $(".contentRight #users").hide();
                $(".contentRight #needDiv").show();
                $("#needCheckLesson").empty();
                showNeedCheckAudio();

            }else{
                $(".contentRight #firstpage").hide();
                $(".contentRight #Incumbent").hide();
                $(".contentRight #Resignation").hide();
                $(".contentRight #resume").hide();
                $(".contentRight #resumes").hide();
                $(".contentRight #applys").show();
                $(".contentRight #users").hide();
                $(".contentRight #needDiv").hide();
            }

        }
    }, "li");


    function operateFormatter(value, row, index) {
        return [
            '<i class="iconfont cute3 remove">&#xe62c;</i>',
            '<i class="iconfont cute3 edit">&#xe625;</i>',
        ].join('')
    }

    function adminoperateFormatter(value, row, index) {
        return [
            '<i class="iconfont cute3 remove">&#xe62c;</i>',

        ].join('')
    }

    window.operateEvents = {
        'click .edit': function (e, value, row, index) {
            $("#rechargemodal").modal('show');
            $("#intrinsicMoney").attr("userid", row.userid);
            $("#intrinsicMoney").val(row.accountmoney);

        },
        'click .remove': function (e, value, row, index) {
            swal({
                title: "确认删除？",
                buttons: {
                    cancel: true,
                    confirm: "Confirm"
                }
            }).then(function (isConfirm) {
                    if (isConfirm) {
                        $.ajax({
                            type: 'get',
                            url: "deleteUserInfo",
                            data: {
                                "userid": row.userid
                            },
                            success: function (d) {
                                if (d > 0) {
                                    swal("操作成功");
                                    $('#online').bootstrapTable('remove', {
                                        field: 'userid',
                                        values: [row.userid]
                                    })

                                } else {
                                    swal("操作失败");
                                }
                            },
                            error: function (d) {
                                swal("NO", d, "error");
                            }
                        });
                    }


                }
            )
        }
    }
    //上传视频
    $("#input-id").fileinput({
        'uploadUrl': 'upload',
        'showUpload': true,
        'enctype': 'multipart/form-data',
        'allowedFileExtensions': ['AVI', 'wma', 'rmvb', 'rm', 'flash', 'mp4', 'mid', '3GP'],
        "previewFileIcon": "<i class='glyphicon glyphicon-king'></i>",
        "msgFilesTooMany": "3",
        "browseClass": "btn btn-primary",
    }).on("fileuploaded", function (event, data, key) {

        console.log(data);
        console.log(key);

    }).on("fileuploaded",function(event, data, previewId, index){
        swal("上传视频成功");

              console.log("文件上传成功"+data.id);
    }).on('fileerror', function(event, data, msg){
                  console.log("文件上传失败"+data.id);
    });
    //充值余额
    function addMoney() {
        var userid = $("#intrinsicMoney").attr("userid");
        var money = $("#rechargeText").val();
        $.ajax({
            "type": 'get',
            "url": "rechargeMoney",
            "data": {
                "userid": userid,
                "money": money
            },
            "success": function (d) {
                if (d > 0) {
                    swal("充值成功")
                    $("#online").bootstrapTable('refresh')
                } else {
                    swal("充值失败")
                }
            }

        })

    }

    // 用户信息
    $('#online').bootstrapTable({
        url: 'allUSer',
        striped: true, //是否显示行间隔色
        pageNumber: 1, //初始化加载第一页
        pagination: true,//是否分页
        sidePagination: 'client',//server:服务器端分页|client：前端分页
        pageSize: 8,//单页记录数
        pageList: [5, 10, 20, 30],//可选择单页记录数
        search: true,
        columns: [

            {
                field: 'username',
                width: 220,
                align: 'center',
                title: '用户名'

            }, {
                field: 'realname',
                sortable: true,
                align: 'center',
                title: '真实姓名'
            }, {
                field: 'score',
                sortable: true,
                align: 'center',
                title: '积分',

            }, {
                field: 'accountmoney',
                sortable: true,
                align: 'center',
                title: '余额'
            }, {
                field: 'sex',
                sortable: true,
                align: 'center',
                title: '性别'
            }, {
                field: 'age',
                title: '年龄',
                sortable: true,
                align: 'center'
            }, {
                field: 'telephone',
                sortable: true,
                align: 'center',
                title: '手机号码'
            }, {
                field: 'address',
                sortable: true,
                align: 'center',
                title: '地址'
            }, {
                fixed: 'right',
                title: '操作',
                width: 220,
                align: 'center',
                formatter: operateFormatter,
                events: window.operateEvents
            }]

    });
    //管理员信息
    $('#offline').bootstrapTable({

        url: 'AllAdmin',
        striped: true, //是否显示行间隔色
        pageNumber: 1, //初始化加载第一页
        pagination: true,//是否分页
        sidePagination: 'client',//server:服务器端分页|client：前端分页
        pageSize: 8,//单页记录数
        pageList: [5, 10, 20, 30],//可选择单页记录数
        search: true,
        columns: [
            {
                field: 'adminname',
                width: 220,
                align: 'center',
                title: '员工编号'

            }, {
                field: 'realname',
                sortable: true,
                align: 'center',
                title: '员工姓名'
            }, {
                field: 'sex',
                sortable: true,
                align: 'center',
                title: '性别'
            }, {
                field: 'age',
                sortable: true,
                align: 'center',
                title: '年龄'
            }, {
                field: 'telephone',
                sortable: true,
                align: 'center',
                title: '手机号码'
            }, {
                field: 'address',
                sortable: true,
                align: 'center',
                title: '家庭住址'
            }, {
                fixed: 'right',
                title: '操作',
                width: 220,
                align: 'center',
                formatter: adminoperateFormatter,
                events: window.operateEvents
            }]

    });


    //显示添加用户信息的模态框
    $("#showAddUserInfoModal").click(function () {
        $("#myModal").modal('show');
    })
    //显示添加管理员信息的模态框
    $("#showadminUserModal").click(function () {
        $("#adminModal").modal('show');
    })
    //添加管理员信息
    $("#addAdminInfoBtn").click(function () {
        var adminname = $("#adminusername").val();
        var adminpassword = $("#adminpassword").val();
        var adminConfimrPassword = $("#adminconfirmpassword").val();
        var adminrealname = $("#adminrealname").val();
        var adminage = $("#adminage").val();
        var admintelphone = $("#admintelephone").val();
        var adminaddress = $("#adminaddress").val();
        var adminsex = $("input[name='adminsex']:checked").val();
        if (isEmpty(adminname)) {
            swal("员工号不能为空");
            return
        } else if (adminUnique(adminname)) {
            swal("员工号已经存在");
            return
        } else if (testEmpno(adminname)) {
            swal("请输入八位的员工号");
            return
        } else if (!testEmpnoNumber(adminname)) {
            swal("员工号必须为数字");
            return
        } else if (isEmpty(adminpassword)) {
            swal("密码不能为空");
            return
        } else if (!testPassword(adminpassword)) {
            swal("请输入合格的密码");
            return
        } else if (adminpassword != adminConfimrPassword) {
            swal("两次密码必须相同");
            return
        } else if (!testRealname(adminrealname)) {
            swal("请输入正确的真实姓名");
            return
        } else if (isEmpty(adminrealname)) {
            swal("真实姓名不能为空");
            return
        } else if (isEmpty(admintelphone)) {
            swal("手机号不能为空");
            return
        } else if (!testTel(admintelphone)) {
            swal("请输入正确的手机号");
            return
        } else if (testAdminTel(admintelphone)) {
            swal("手机号已存在");
            return
        } else {
            $.ajax({
                "type": 'get',
                "url": "insertAdmin",
                "data": {
                    "adminname": adminname,
                    "password": adminpassword,
                    "realname": adminrealname,
                    "age": adminage,
                    "sex": adminsex,
                    "telephone": admintelphone,
                    "address": adminaddress
                },
                "success": function (d) {
                    if (d > 0) {
                        swal("添加管理员信息成功");
                        $("#offline").bootstrapTable('refresh');
                        $("#adminModal").modal('hide');
                    } else {
                        swal("添加失败");
                    }
                }
            })
        }


    })

    // 添加用户信息
    $("#addUserInfoBtn").click(function () {
        if (isEmpty($("#username").val())) {
            swal("用户名不能为空");
            return
        } else if (isEmpty($("#password").val())) {
            swal("密码不能为空");
            return
        } else if (isEmpty($("#realname").val())) {
            swal("真实姓名不能为空");
            return
        } else if (isEmpty($("#telephone").val())) {
            swal("手机号码不能为空");
            return
        } else if (uniqueTest($("#username").val())) {
            swal("用户名已存在");
            return
        } else if ($("#password").val() != $("#confirmpassword").val()) {
            swal("两次输入密码不同");
            return
        } else if (uniqueTestTel($("#telephone").val())) {
            swal("手机号已存在");
            return
        } else if (!testTel($("#telephone").val())) {
            swal("请输入正确的手机号");
            return
        } else if (!testPassword($("#password").val())) {
            swal("请输入合格的密码");
            return
        } else if (match($("#username").val())) {
            swal("请输入正确的用户名");
            return
        } else if (!testRealname($("#realname").val())) {
            swal("请输入正确的真实姓名");
            return
        } else {
            var data = {
                "username": $("#username").val(),
                "password": $("#password").val(),
                "realname": $("#realname").val(),
                "age": $("#age").val(),
                "telephone": $("#telephone").val(),
                "address": $("#address").val(),
                "sex": $("input[name='usersex']:checked").val()
            };

            $.ajax({
                type: 'get',
                url: 'insertUserInfo',
                data: {
                    "username": $("#username").val(),
                    "password": $("#password").val(),
                    "realname": $("#realname").val(),
                    "age": $("#age").val(),
                    "telephone": $("#telephone").val(),
                    "address": $("#address").val(),
                    "sex": $("input[name='usersex']:checked").val()
                },
                success: function (d) {
                    if (d > 0) {
                        alert("添加用户信息成功");
                        $("#myModal").modal('hide');
                        $("#online").bootstrapTable('refresh');

                    } else {
                        alert("添加用户信息失败");
                    }
                }


            })
        }

    })

    //视频上传时出传递视频类型
    function getAudioType() {
        var typeid=$("#audioType option:selected").attr("typeid");
        console.log(typeid);
        $.ajax({
            "type": 'get',
            "url": "getTypeId",
            "data": {
                "lessonTypeId":$("#audioType option:selected").attr("typeid")
            },
            "success": function (d) {
                if (d==0) {

                   $("#selectType").addClass('kv-hidden');
                   $("#vidio").removeClass('kv-hidden');
                } else {
                    return
                }
            }
        })
    }



    function showUserInfo() {
        $("#myModal1").modal('show');
        $.ajax({
            type: 'get',
            url: "modifyUserInfo",
            success: function (object) {

                for (var key in object) {
                    if (key == "1") {
                        $("#editusername").val(object[key].username);
                        $("#editpassword").val(object[key].password);
                        $("#editconfirmpassword").val(object[key].password);
                        $("#editrealname").val(object[key].realname);
                        $("#editage").val(object[key].age);
                        $("#editaddress").val(object[key].address);
                        $("#edittelephone").val(object[key].telephone);
                        $("input[value='" + object[key].sex + "']").attr("checked", "true");
                        $("#editAccountMoney").val(object[key].accountmoney);
                        $("#accountpoints").val(object[key].score);
                    } else {
                        $("#score").hide();
                        $("#money").hide();
                        $("#editusername").val(object[key].adminname);
                        $("#editpassword").val(object[key].password);
                        $("#editconfirmpassword").val(object[key].password);
                        $("#editrealname").val(object[key].realname);
                        $("#editage").val(object[key].age);
                        $("#editaddress").val(object[key].address);
                        $("#edittelephone").val(object[key].telephone);
                        $("input[value='" + object[key].sex + "']").attr("checked", "true");
                    }
                }
            }
        })
    }

    //修改用户的基本信息
    function ModifyUserInfo() {
        swal({
            title: "确定更改？？",
            buttons: {
                cancel: true,
                confirm: "Confirm"
            }

        }).then(function (isConfirm) {
            if (isConfirm) {
                $.ajax({
                    type: 'get',
                    url: "returnRoleId",
                    success: function (d) {

                        moreUpdateUser(d);
                    }

                })
            }
        })
    }

    //用户登陆后自行编辑自己的基本信息
    function moreUpdateUser(d) {
        var username = $("#editusername").val();
        var password = $("#editpassword").val();
        var realname = $("#editrealname").val();
        var age = $("#editage").val();
        var telephone = $("#edittelephone").val();
        var address = $("#editaddress").val();
        var sex = $("input[name='editusersex']:checked").val();


        if (d == "1") {

            if (isEmpty($("#editusername").val())) {
                swal("用户名不能为空");
                return
            } else if (isEmpty(password)) {
                swal("密码不能为空");
                return
            } else if (isEmpty(realname)) {
                swal("真实姓名不能为空");
                return
            } else if (isEmpty(telephone)) {
                swal("手机号码不能为空");
                return
            } else if (editUnique(username)) {
                swal("用户名已存在");
                return
            } else if (!testTel(telephone)) {
                swal("请输入正确的手机号");
                return
            } else if (editTestTEl(telephone)) {
                swal("手机号码已存在");
                return
            } else if (!testPassword(password)) {
                swal("请输入合格的密码");
                return
            } else if (!testRealname(realname)) {
                swal("请输入正确的中文名");
                return
            } else {
                $.ajax({
                    type: 'get',
                    url: "editUserInfo",
                    data: {
                        "username": username,
                        "password": password,
                        "realname": realname,
                        "age": age,
                        "telephone": telephone,
                        "address": address,
                        "sex": sex

                    },
                    success: function (d) {
                        if (d > 0) {
                            swal("编辑成功");
                            $("#myModal1").modal('hide');
                            $("#online").bootstrapTable('refresh');
                        } else {
                            swal("编辑失败")
                        }
                    }
                })
            }

        } else {
            if (isEmpty(username)) {
                swal("员工号不能为空");
                return
            } else if (editAdminName(username)) {
                swal("员工号已经存在");
                return
            } else if (testEmpno(username)) {
                swal("请输入八位的员工号");
                return
            } else if (!testEmpnoNumber(username)) {
                swal("员工号必须为数字");
                return
            } else if (isEmpty(password)) {
                swal("密码不能为空");
                return
            } else if (!testPassword(password)) {
                swal("请输入合格的密码");
                return
            } else if ($("#editconfirmpassword").val() != password) {
                swal("两次密码必须相同");
                return
            } else if (!testRealname(realname)) {
                swal("请输入正确的真实姓名");
                return
            } else if (isEmpty(realname)) {
                swal("真实姓名不能为空");
                return
            } else if (isEmpty(telephone)) {
                swal("手机号不能为空");
                return
            } else if (!testTel(telephone)) {
                swal("请输入正确的手机号");
                return
            } else if (editAdminTel(telephone)) {
                swal("手机号已存在");
                return
            } else {
                $.ajax({
                    type: 'get',
                    url: "editAdmin",
                    data: {
                        "adminname": username,
                        "password": password,
                        "realname": realname,
                        "age": age,
                        "telephone": telephone,
                        "address": address,
                        "sex": sex
                    },
                    success: function (d) {
                        if (d > 0) {
                            swal("更改成功");
                            $("#myModal1").modal('hide');
                            $("#offline").bootstrapTable('refresh');
                        } else {
                            swal("更改失败");
                        }
                    }
                })
            }


        }
    }
</script>

</html>